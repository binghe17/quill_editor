<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Quill Image Resize Module Demo</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/default.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>

    <script src="http://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <link href="http://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link href="http://cdn.quilljs.com/1.3.6/quill.bubble.css" rel="stylesheet">
    <script src="quill-blot-formatter.min.js"></script>
    <script src="quill-image-drop.min.js"></script>
    <script src="clickToTouch.js"></script>
</head>

<body>
<h1>Quill Image Resize Module Demo</h1>
<div id="editor" style="max-height:500px;overflow:auto">
        <div id="quill-container">
            <pre>
            <p>//Hi! Here is an image...</p>
            <p>function ff(){ return true;}</p>

            </pre>
            <p>A Video!</p>
            <div>

                <iframe class="ql-video" frameborder="0" allowfullscreen="true" src="https://www.youtube.com/embed/WNmnpGC_hgE" height="196"
                width="391"></iframe>
            </div>
            
            <div><span>111111</span><span>2222222</span></div>

            <p><img src="https://pgnqdrjultom1827145.cdn.ntruss.com/img/6e/8e/6e8e061c960e8183ea1006bbee330cc30a2f84f64813ca4101d2b0a91ee7d40c_v1.jpg" /></p>
        </div>
        <iframe class="ql-video" frameborder="0" allowfullscreen="true" src="https://player.vimeo.com/video/352494023/" data-blot-formatter-unclickable-bound="true" width="367" height="183.5" style=""></iframe>
</div>



<style>
#editor iframe {display:inline-block}
</style>

<script>
// hljs.configure({   // optionally configure hljs
//   languages: ['javascript', 'ruby', 'python']
// });

hljs.configure({useBR: true, languages: ['javascript']});
document.querySelectorAll('#editor pre').forEach((block) => {
  hljs.highlightBlock(block);
});

Quill.register('modules/blotFormatter', QuillBlotFormatter.default);
var editor = new Quill('#editor', {
	modules: {
        syntax: true, //highlight
        toolbar: {
            container: [
                ['bold', 'italic', 'underline', 'strike'],
                ['link', 'image', 'video'],
                [{ 'header': 1 }, { 'header': 2 }],
                [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                [{ 'script': 'sub' }, { 'script': 'super' }],
                ['blockquote', 'code-block'],
                [{ 'align': [] }],
                [{ 'indent': '-1' }, { 'indent': '+1' }],
                [{ 'direction': 'rtl' }],
                [{ 'font': [] }],
                [{ 'header': [1, 2, 3, 4, 5, 6, false] }],
                [{ 'color': [] }, { 'background': [] }],
                ['clean'],
                // ['emoji'],
            ],
            // handlers: {
            //     'emoji': function () {}
            // }
        },
        blotFormatter: { //https://github.com/Fandom-OSS/quill-blot-formatter
            // see config options below
            // specs: [
            //     // CustomImageSpec,
            // ],
            overlay: {
                style: {
                    border: '2px solid red',
                }
            }
            ,resize:{
                // handleStyle
            }
        }

    },
    // scrollingContainer: "#scrolling-container",
    placeholder: 'Compose an epic...',
    theme: "snow",
    // theme: "bubble",
});

// //禁止调试
// Quill.debug(false);
// //自定义的事件
// (editor || window.editor_quill).on("text-change", function(delta, oldDelta, source) {
//     if('user' === source) {
//         //打印当前的内容  quill.container.firstChild.innerHTML
//         console.log((editor || window.editor_quill).container.firstChild.innerHTML);
//     }
// });
// var toolbar = (editor || window.editor_quill).getModule('toolbar');
// toolbar.addHandler("image", function(e) {
//     //console.log("自定义的事件-图片");               	   
//     (editor || window.editor_quill).insertEmbed((window.editor_insertNum || 10000000000000), 'image', "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTIRomHk_lUmIFno6KrnL7wMmCrVDew-EQpT5EC5mFJS0xp9lPhOw");
// });
// //视频 http://www.w3school.com.cn/i/movie.ogg
// toolbar.addHandler("video", function(e) {
//     //10000000000000 = 1兆亿保证永远插在最后面
//     (editor || window.editor_quill).insertEmbed((window.editor_insertNum || 10000000000000), 'video', "http://www.w3school.com.cn/i/movie.ogg");
// });



</script>
</body>

</html>